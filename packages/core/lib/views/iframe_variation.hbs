<!DOCTYPE html>
<html lang="en"{{#if embedded}} style="overflow: hidden;"{{/if}}>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1,width=device-width">
    <title>Component</title>
    {{{jsFiles}}}
    {{#unless isBuild}}
      {{#if dev}}
        <script src="{{projectName}}/js/socket.io.slim.js" defer></script>
      {{/if}}
      {{#if accessibilityValidation}}
        <script src="{{projectName}}/js/axe.min.js" defer></script>
      {{/if}}
      <script src="{{projectName}}/js/iframe.js" {{#if dev}} type="module"
        {{/if}}{{#if prod}} defer{{/if}}></script>
    {{/unless}}
    {{{cssFiles}}}
    <style>
      {{{customCSS}}}
    </style>
  </head>

  <body>
    <div id="container">
      {{{html}}}
    </div>
    <script>
      window.validations = {
        html: {{ htmlValidation }},
        accessibility: {{ accessibilityValidation }},
      };

      function sendHeightToParent() {
        window.parent.postMessage({ id: window.frameElement.id, height: document.getElementById("container").offsetHeight }, "*");
      }

      if (window.frameElement) {
        window.addEventListener("load", () => {
          sendHeightToParent();
        });
        document.addEventListener("DOMContentLoaded", function () {
          const mo = new MutationObserver(() => {
            sendHeightToParent();
          });
          mo.observe(document.documentElement, { attributes: true, childList: true, subtree: true });
          const ro = new ResizeObserver((e) => {
            sendHeightToParent();
          });
          ro.observe(document.documentElement);
          sendHeightToParent();
        });
      }
    </script>
  </body>

</html>
